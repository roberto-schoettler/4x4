<!DOCTYPE html>
<!--
    Copyright (c) 2012-2014 Adobe Systems Incorporated. All rights reserved.

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
     KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.
-->
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <!--<link rel="stylesheet" type="text/css" href="css/index.css" />-->
        <title>4x4</title>
		
        <script src="lib/touch-2.4.1/sencha-touch-all-debug-with-chart.js" type="text/javascript"></script>
        <link href="lib/touch-2.4.1/resources/css/sencha-touch.css" rel="stylesheet" type="text/css" />
        
        <!-- Overriding Styles -->
        <link href="css/base.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript">
            app.initialize();
			
			Ext.application({
				name: 'Sencha',

				launch: function() {
					var chart = {
						xtype: 'polar',
						animate: true,
						store: {
							fields: ['id', 'value'],
							data: [{
								'id': 'Carbs',
								'value': 100 * Math.random()
							}, {
								'id': 'Fats',
								'value': 100 * Math.random()
							}, {
								'id': 'Fibers',
								'value': 100 * Math.random()
							}, {
								'id': 'Minerals',
								'value': 100 * Math.random()
							}, {
								'id': 'Proteins',
								'value': 100 * Math.random()
							}, {
								'id': 'Vitamins',
								'value': 100 * Math.random()
							}, {
								'id': 'Calories',
								'value': 100 * Math.random()
							}]
						},
						background: 'white',
						flex: 1,
						insetPadding: 50,
						interactions: 'rotate',
						series: [
							{
								type: 'radar',
								xField: 'id',
								yField: 'value',
								style: {
									fillStyle: 'rgba(0,255,0,0.2)',
									strokeStyle: 'rgba(0,0,0,0.8)',
									lineWidth: 1
								}
							}
						],
						axes: [
							{
								type: 'numeric',
								position: 'radial',
								fields: 'value',
								grid: true,
								style: {
									estStepSize: 20
								},
								label: {
									fill: 'black'
								}
							},
							{
								type: 'category',
								position: 'angular',
								fields: 'id',
								grid: true,
								style: {
									estStepSize: 2
								},
								label: {
									fill: 'black'
								}
							}
						]
					};
					
					// Fixes the margins for iOS
					var margin = '0';
					if (Ext.os.is.iOS && Ext.os.version.major >= 7) {
						margin = '20 0 0 0';
					}
					
					Ext.define('DailyPlanRecipe', {
					    extend: 'Ext.data.Model',
					    config: {
					        fields: ['item', 'meal']
					    }
					});
					
					var storeDailyPlan = Ext.create('Ext.data.Store', {
						model: 'DailyPlanRecipe',
						sorters: ['meal', 'item'],
						grouper: {
							groupFn: function(record) {
								return record.get('meal');
							}
						},
						data: [
							{item: 'Cookies', meal: 'Breakfast'},
							{item: 'Mashed Potatos', meal: 'Dinner'},
							{item: 'Meatballs', meal: 'Breakfast'},
							{item: 'Pasta Carbonara', meal: 'Lunch'},
							{item: 'Paçoca', meal: 'Snack'},
							{item: 'Curry', meal: 'Lunch'},
							{item: 'Borsch', meal: 'Dinner'}
						]
					});
					
					Ext.define('Recipe', {
					    extend: 'Ext.data.Model',
					    config: {
					        fields: ['name']
					    }
					});
					
					var storeRecipes = Ext.create('Ext.data.Store', {
						model: 'Recipe',
						sorters: ['name'],
						grouper: {
							groupFn: function(record) {
								return record.get('name')[0];
							}
						},
						data: [
							{name: 'Cookies'},
							{name: 'Mashed Potatos'},
							{name: 'Meatballs'},
							{name: 'Pasta Carbonara'},
							{name: 'Paçoca'},
							{name: 'Curry'},
							{name: 'Borsch'}
						]
					});
					
					Ext.create("Ext.Panel", {
						fullscreen: true,
						margin: margin,
						layout: 'vbox',
						items: [{
							docked: 'top',
							xtype: 'panel',
							items: [{
								xtype: 'toolbar',
								docked: 'top',
								layout: 'hbox',
								height: 30,
								style: 'line-height: 3em;',
								items: [{
									xtype: 'component',
									html: '<img src="img/icon.png" style="width: 10%;"><img src="img/logo.png" style="max-width: 40%;">',
									flex: 1
								}, {
									xtype: 'img',
									src: 'img/hamburguer.png',
									width: 32,
									height: 32,
									margin: '6 3 3 3',
									listeners: {
										tap: function () {
											Ext.Viewport.add({
												xtype: 'panel',
												width: '80%',
												autoHeight: true,
												centered: true,
												modal: true,
												showAnimation: {
													type: 'slide'
												},
												hideAnimation: {
													type: 'slideOut',
													direction: 'right'
												},
												hideOnMaskTap: true,
												padding: 20,
												defaults: {
													xtype: 'button',
													margin: 10,
													handler: function () {
														Ext.Viewport.add({
															xtype: 'panel',
															width: '65%',
															autoHeight: true,
															centered: true,
															modal: true,
															showAnimation: {
																type: 'popIn',
																duration: 250,
																easing: 'ease-out'
															},
															hideAnimation: {
																type: 'popOut',
																duration: 250,
																easing: 'ease-out'
															},
															hideOnMaskTap: true,
															styleHtmlContent: true,
															html: '<p>Comming soon!</p>',
															items: [{
																xtype: 'toolbar',
																docked: 'top',
																title: 'New Feature'
															}]
														}).show();
													}
												},
												items: [{
													xtype: 'toolbar',
													docked: 'top',
													title: 'Menu',
													margin: 0
												}, {
													text: 'About Us'
												}, {
													text: 'Diet Requirements'
												}, {
													text: 'Shopping List'
												}, {
													text: 'Rate Us'
												}, {
													text: 'GeoLocation'
												}]
											}).show();
										}
									}
								}]
							}, {
								xtype: 'datepickerfield',
								id: 'datepicker',
								value: new Date()
							}]
						}, {
							xtype: 'carousel',
							tabBarPosition: 'bottom',
							activeItem: 1,
							flex: 1,
							listeners: {
								activeitemchange: function (carousel, value, oldValue, eOpts) {
									if (carousel.activeIndex == 0)
										Ext.getCmp('datepicker').hide({
											type: 'slideOut',
											direction: 'up'
										});
									else
										Ext.getCmp('datepicker').show({
											type: 'slide',
											direction: 'down'
										});
								}
							},
							items: [{
								//title: 'Profile',
								layout: 'vbox',
								items: [{
									items: [{
										xtype: 'datepickerfield',
										label: 'Birthday',
										picker: {
											yearFrom: 1900,
											value: {
												year: 1980
											}
										}
									}, {
										layout: 'hbox',
										items: [{
											xtype: 'component',
											flex: 6,
											html: '<div class="field-label">Height</div>'
										}, {
											xtype: 'numberfield',
											flex: 4,
											listeners: {
												blur: function (field) {
													if (!field.getValue() || field.getValue() < 0)
														field.setValue(0);
												}
											}
										}, {
											xtype: 'component',
											flex: 3,
											html: '<div class="field-label">ft</div>'
										}, {
											xtype: 'numberfield',
											flex: 4,
											listeners: {
												blur: function (field) {
													if (!field.getValue() || field.getValue() < 0)
														field.setValue(0);
												}
											}
										}, {
											xtype: 'component',
											flex: 3,
											html: '<div class="field-label">in</div>'
										}]
									}, {
										layout: 'hbox',
										items: [{
											xtype: 'component',
											flex: 6,
											html: '<div class="field-label" style="line-height: 32px;">Gender</div>'
										}, {
											xtype: 'togglefield',
											styleHtmlCls: 'gender',
											styleHtmlContent: false,
											flex: 7
										}, {
											xtype: 'label',
											html: '<div class="field-label" style="line-height: 32px;">BMI: 50</div>',
											flex: 7
										}]
									}]
								}, {
									layout: 'hbox',
									flex: 1,
									items: [{
										xtype: 'img',
										flex: 3,
										maxHeight: '100%',
										src: 'img/body1.png'
									}, {
										scrollable: true,
										flex: 7,
										defaults: {
											labelAlign: 'top'
										},
										items: [{
											xtype: 'sliderfield',
											label: 'Slider 1',
											value: 50,
											minValue: 0,
											maxValue: 100
										}, {
											xtype: 'sliderfield',
											label: 'Slider 2',
											value: 50,
											minValue: 0,
											maxValue: 100
										}, {
											xtype: 'sliderfield',
											label: 'Slider 3',
											value: 50,
											minValue: 0,
											maxValue: 100
										}, {
											xtype: 'sliderfield',
											label: 'Slider 4',
											value: 50,
											minValue: 0,
											maxValue: 100
										}, {
											xtype: 'sliderfield',
											label: 'Slider 5',
											value: 50,
											minValue: 0,
											maxValue: 100
										}, {
											xtype: 'sliderfield',
											label: 'Slider 6',
											value: 50,
											minValue: 0,
											maxValue: 100
										}, {
											xtype: 'sliderfield',
											label: 'Slider 5',
											value: 50,
											minValue: 0,
											maxValue: 100
										}, {
											xtype: 'sliderfield',
											label: 'Slider 8',
											value: 50,
											minValue: 0,
											maxValue: 100
										}]
									}]
								}]
							}, {
								//title: 'Home',
								layout: 'fit',
								items: [chart]
							}, {
								//title: 'Plan',
								layout: 'fit',
								items: [{
									xtype: 'list',
    								itemTpl: '{item}',
    								itemCls: 'remove',
									store: storeDailyPlan,
									grouped: true,
									onItemDisclosure: function (record) {
										Ext.Msg.alert('Click detected', 'You clicked on ' + record.data.item);
									}
								}]
							}, {
								//title: 'Recipes',
								layout: 'vbox',
								items: [{
									xtype : 'toolbar',
									docked: 'top',
									items: [{
										xtype: 'searchfield',
										placeHolder: 'Search',
										flex: 1
									}]
								}, {
									xtype: 'list',
									itemTpl: '{name}',
									itemCls: 'add',
									flex: 1,
									store: storeRecipes,
									grouped: true,
									onItemDisclosure: function (record) {
										Ext.Viewport.add({
											xtype: 'panel',
											title: 'Choose',
											modal: true,
											autoHeight: true,
											closable: false,
											showAnimation: {
												type: 'popIn',
												duration: 250,
												easing: 'ease-out'
											},
											hideAnimation: {
												type: 'popOut',
												duration: 250,
												easing: 'ease-out'
											},
											centered: true,
											width: '80%',
											items: [{
												xtype : 'toolbar',
												docked: 'bottom',
												deafults: {
													xtype: 'button'
												},
												align: 'right',
												items: [{
													xtype: 'container',
													flex: 1
												}, {
													text: 'Ok',
													ui: 'confirm-round'
												}, {
													text: 'Cancel',
													ui: 'decline-round',
													handler: function (btn) {
														btn.up('panel').destroy();
													}
												}]
											}, {
												xtype: 'selectfield',
												placeHolder: 'Meal',
												store: ['asd', 'qwe']
											}, {
												xtype: 'spinnerfield',
												label: 'Quantity',
												labelWidth: 90,
												stepValue: 1,
												minValue: 1,
												maxValue: 10,
												cycle: true,
												value: 1
											}]
										});
									}
								}]
							}]
						}]
					});
				}
			});
        </script>
    </body>
</html>
